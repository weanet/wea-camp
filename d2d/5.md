# D2D 集训营第5期

前面我们已经学会在页面使用 js 的基础语法遍历数据并往页面插入 html，这时候数据是写死的，如果数据是从服务器动态加载的呢？本次培训就围绕 ajax 技术和 web 应用架构来展开。

日期：2019/06/25

地点：WeaTech 526 小会议室

## 🥇 培训大纲

- 工程师解决问题的思路
  - 发现问题
  - 定位问题
  - 个性问题转化成共性问题
  - 搜索引擎全网查询
- Web 应用系统架构概览
  - 客户端
  - 服务器
  - Http 请求
- 浏览器中使用 Ajax 发起请求
  - `$.get()` 发起请求加载本地静态数据
  - `$().load()` 发起请求加载 html 片段
  - `$.get()` 发起请求加载其他服务器上动态数据

## 📚 培训内容

本次课程主要围绕 Web 应用的基本架构，帮助大家认清整个 Web 系统的基本模样，以及自身所处的位置。

### 1）Web 的开端

当我们在浏览器中输入 `https://www.weaver.com.cn/` 时发生了什么？

(架构图)

### 2）Web 应用架构图

现场使用 Adobe XD 绘制架构图，方便学员理解整体网络运行架构：

(架构图)

### 3）Ajax 技术

[Ajax](https://developer.mozilla.org/en-US/docs/Web/Guide/AJAX) 是世界上最流行的页面动态加载技术，请查阅使用文档 [Jquery 函数字典 Ajax 篇](http://jquery.cuishifeng.cn/jQuery.get.html)

### 用例一

发起 `ajax` 请求给本地服务器，加载人员卡片的静态数据

``` js
// 发起 ajax 请求给本地服务器，加载人员卡片的静态数据
$.get('./wued.json', function(res) {
  renderCard(res);
})
```

### 用例二

发起 `ajax` 请求给本地服务器，加载公共页面 HTML 片段

``` js
// 发起 ajax 请求给本地服务器，加载公共页面 HTML 片段
$('#wued_footer').load("./footer.html", function() {
  console.log('footer 加载完成');
})
```

### 用例三

发起 `ajax` 请求给其他服务器，加载人员卡片的动态数据

例如：后端提供一个动态数据接口 `https://wued-code-camp.herokuapp.com/api/wued`（可在浏览器中测试）

那么我们如何在浏览器中发起请求使用的这个接口呢？

``` js
$.get('https://wued-code-camp.herokuapp.com/api/wued', function(res) {
  renderCard(res);
})
```

注：由于浏览器端有[浏览器同源策略请求限制](https://developer.mozilla.org/zh-CN/docs/Web/Security/Same-origin_policy)，需要配置本地 VS Code 中 live server 插件的代理服务

```json
{
  "liveServer.settings.host": "192.168.30.175",
  "liveServer.settings.port": 5500,
  "liveServer.settings.proxy": {
    "enable": true,
    "baseUri": "/api",
    "proxyUri": "https://wued-code-camp.herokuapp.com/api"
  }
}
```

这个时候 live server 会帮我们把 `http://localhost:5500/api/wued` 请求代理转发到 `https://wued-code-camp.herokuapp.com/api/wued`。

``` js
$.get('/api/wued', function(res) {
  renderCard(res);
})
```

成功解决跨域访问限制，请求到真实数据。

## ✏️ 课后作业

本次课程内容较多，暂无课后作业，等待下期布置。

## 💯 练习资料

请参考 `wued-code-camp\examples\AJAX`，`compelete` 为参考答案，`initial` 中可以自行对照练习。

## 📑 参考资料

[1] [浏览器的同源策略.MDN Web Docs](https://developer.mozilla.org/zh-CN/docs/Web/Security/Same-origin_policy)

[2] [Jquery 函数字典 Ajax 篇](http://jquery.cuishifeng.cn/jQuery.get.html)

[3] [Asynchronous JavaScript + XML](https://developer.mozilla.org/en-US/docs/Web/Guide/AJAX)